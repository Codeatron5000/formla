!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.formla=e():t.formla=e()}(self,(()=>(()=>{"use strict";var t={562:(t,e,r)=>{e.__esModule=!0,e.extractFiles=function t(e,r){void 0===r&&(r="");var i,o=new Map;function s(t,e){var r=o.get(e);r?r.push.apply(r,t):o.set(e,t)}if("undefined"!=typeof File&&e instanceof File||"undefined"!=typeof Blob&&e instanceof Blob||e instanceof n.ReactNativeFile)i=null,s([r],e);else{var a=r?r+".":"";if("undefined"!=typeof FileList&&e instanceof FileList)i=Array.prototype.map.call(e,(function(t,e){return s([""+a+e],t),null}));else if(Array.isArray(e))i=e.map((function(e,r){var n=t(e,""+a+r);return n.files.forEach(s),n.clone}));else if(e&&e.constructor===Object)for(var l in i={},e){var u=t(e[l],""+a+l);u.files.forEach(s),i[l]=u.clone}else i=e}return{clone:i,files:o}};var n=r(850)},568:(t,e,r)=>{e.lm=void 0;var n=r(562);e.lm=n.extractFiles,r(850).ReactNativeFile},850:(t,e)=>{e.__esModule=!0,e.ReactNativeFile=void 0;e.ReactNativeFile=function(t){var e=t.uri,r=t.name,n=t.type;this.uri=e,this.name=r,this.type=n}}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};r.r(n),r.d(n,{default:()=>O});var i=r(568);const o=Object.prototype.hasOwnProperty;function s(t,e){return o.call(t,e)}function a(t){return!!t&&t instanceof Blob}function l(t){if(h(t))return t.map(l);if(null==t)return null;if(a(t)||["number","string","boolean"].includes(typeof t))return t;if(u(t)){let e={};return Object.keys(t).forEach((r=>e[r]=l(t[r]))),e}}function u(t){return null!==t&&"object"==typeof t}function h(t){return t instanceof Array}function f(t){return null==t}function c(t){return"string"==typeof t}function p(t){if(h(t))for(let e=0;e<t.length;e++){if(t[e]instanceof File)return!0;if(u(t[e]))return p(t[e])}else for(let e in t){if(t[e]instanceof File)return!0;if(u(t[e])&&p(t[e]))return!0}return!1}function d(t){let e={};return t.forEach(((t,r)=>{e[r]=t})),e}function m(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const b=class{constructor(){m(this,"errors",void 0),m(this,"elements",void 0),this.errors={},this.elements=[]}has(t){return t instanceof RegExp?Object.keys(this.errors).some((e=>t.test(e))):this.errors.hasOwnProperty(t)}any(){return Object.keys(this.errors).length>0}getFirst(t,e=!0){let r=this.get(t,e);if(r)return h(r)?r.length?r[0]:null:r||null}get(t,e=!0){if(t.includes("*")&&e){const e=t.replace(/[.+?^${}()|[\]\\]/g,"\\$&").replace("*","(.*)"),r=new RegExp(e);let n=[];return Object.keys(this.errors).forEach((t=>{if(r.test(t)){const e=this.errors[t];h(e)?n=n.concat(e):n.push(e)}})),n}return this.errors[t]}add(t,e,r=!1){this.has(t)&&!r||(this.errors[t]=e)}record(t,e=3e3){this.errors=t,e&&window.setTimeout((()=>{this.clear()}),e)}clear(t){if(t){const{[t]:e,...r}=this.errors;this.errors=r}else this.errors={}}addElement(t,e){h(t)?t.forEach((t=>this.addElement(t,e))):this.elements.push({key:t,el:e})}removeElement(t){this.elements=this.elements.filter((({el:e})=>e!==t))}removeElementKey(t){h(t)?t.forEach((t=>this.removeElementKey(t))):this.elements=this.elements.filter((({key:e})=>e!==t))}hasElements(){return!!this.elements.length}scrollToFirst(t=null){t=f(t)?{behavior:"smooth",inline:"center"}:t;const e=this.elements.find((({key:t,el:e})=>{let r;if(t instanceof RegExp)r=t;else{let e=t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&");r=new RegExp(e.replace("*",".*"))}if(Object.keys(this.errors).some((t=>r.test(t))))return!0}));e&&!function(t){const e=t.getBoundingClientRect();return e.top>=0&&e.bottom<=(window.innerHeight||window.document.documentElement.clientHeight)}(e.el)&&e.el.scrollIntoView(t)}};var y;function v(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g(t,e,r){(c(e)||"number"==typeof e)&&(e=(""+e).split("."));let n=e.shift();u(t)&&!a(t)&&(e.length?(s(t,n)||(h(t)?t[+n]="0"===n?[]:{}:t[n]="0"===n?[]:{}),h(t)?g(t[+n],e,r):g(t[n],e,r)):h(t)?t[+n]=r:t[n]=r)}function _(t,e){c(e)&&(e=e.split("."));let r,n=e.shift();if(u(t)&&!a(t)&&s(t,n))return r=h(t)?t[+n]:u(t)&&!a(t)?t[n]:void 0,e.length?void _(r,e):r}function E(t,e=""){let r=[];return h(t)?t.forEach(((t,n)=>{let i=`${e}[${n}]`;!u(t)||a(t)?r.push([i,a(t)?t:w(t)]):r=r.concat(E(t,i))})):Object.keys(t).forEach((n=>{let i=t[n],o=e?`${e}[${n}]`:""+n;!u(i)||a(i)?r.push([o,a(i)?i:w(i)]):r=r.concat(E(i,o))})),r}function w(t){return"boolean"==typeof t?""+ +t:"number"==typeof t?t.toString():t||""}class D{constructor(t,e){v(this,"_errors",void 0),v(this,"_data",void 0),v(this,"_dataCb",void 0),v(this,"_originalData",void 0),v(this,"_originalConstantData",void 0),v(this,"_options",void 0),this.setOptions(e),t instanceof Function&&(this._dataCb=t,t=t()),this._originalData={},this._originalConstantData={},this._data={},this.append(t,void 0,!1,!1),this._errors=new b}setOptions(t){this._options=this._options||D.defaultOptions,t&&(this._options={...this._options,...t})}append(t,e,r=!1,n=!0){if(this._dataCb&&!r&&this._options.addAppendToDataCallback&&n){const r=this._dataCb;this._dataCb=()=>{const n=r();return u(t)?{...n,...t}:{...n,[t]:e}}}return u(t)?(Object.keys(t).forEach((e=>{this.append(e,t[e],r,!1)})),this):(e=this.parseData(e),r?g(this._originalConstantData,t,e):g(this._originalData,t,this.parseData(e)),r?Object.defineProperty(this,t,{get:()=>{},set:()=>{throw new Error(`The "${t}" value has been set as constant and cannot be modified`)}}):(g(this._data,t,e),this.defineProperty(t)),this)}defineProperty(t){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,get:()=>_(this._data,t),set:e=>{this.setData(t,e)}})}constantData(t,e){return this.append(t,e,!0,!1)}getData(){return{...this._data,...this._originalConstantData}}setData(t,e){g(this._data,t,e),this._options.autoRemoveError&&this._errors.clear(t)}errors(){return this._errors}reset(){const t=this._dataCb?this._dataCb():this._originalData;for(let t in this._data)delete this[t];return this._originalData={},this._data={},this.append(t,void 0,!1,!1),this._errors.clear(),this}clear(t){var e;return s(this,t)&&g(this._data,t,(e=_(this._data,t))instanceof Array?[]:"object"==typeof e?{}:"string"==typeof e?"":null),this}parseData(t){return this._options.clone?l(t):t}addFileFromEvent(t,e){let r=t.target;if(!(r instanceof HTMLInputElement))throw new Error("Incompatible event target, must be of type HTMLInputElement");return e||(e=r.name),e in this&&""!==r.value&&(t instanceof DragEvent?this.setData(e,t.dataTransfer&&t.dataTransfer.files.length&&t.dataTransfer.files[0]):this.setData(e,r.files&&r.files.length&&r.files[0]),r.value=""),this}post(t,e){return this.submit("post",t,e)}put(t,e){return this.submit("put",t,e)}patch(t,e){return this.submit("patch",t,e)}delete(t,e){return this.submit("delete",t,e)}get(t,e){return this.submit("get",t,e)}graphql(t,e){const r=(e=e||{}).formatData||this._options.formatData;return e.url=e.graphql||this._options.graphql,e.query=t,void 0===e.useJson&&(e.useJson=!this.hasFile()),e.formatData=e=>{e=r?r(e):e;const n={query:t,variables:e};if(!this.hasFile())return n;const{clone:o,files:s}=(0,i.lm)(e);return n.variables=o,{operations:JSON.stringify(n),map:JSON.stringify(d(Array.from(s.values()))),...d(Array.from(s.keys()))}},this.post(e)}submit(t,e,r){r=function(t,e,r){return t=t?u(t)?t:{method:t}:{},e=e?u(e)?e:{url:e}:{},r=r||{},{...r,...e,...t}}(t,e,r);const n={...this._options,...r};let i,o=n.formatData(this.getData());if(this.shouldConvertToFormData(n)){i=new FormData,E(o).forEach((([t,e])=>{i.append(t,e)})),o=i}let s=n.sendWith;const a=this.buildBaseUrl(n);return delete n.baseUrl,s(n.method,a,o,n).then((t=>(n.isValidationError(t)?this.onFail(t,n):this.onSuccess(n),t))).catch((t=>(n.isValidationError(t)&&this.onFail(t,n),function(t){if(t instanceof Error)throw t;return Promise.reject(t)}(t))))}shouldConvertToFormData(t){return(t=t||this._options).strictMode?!t.useJson:!t.useJson||this.hasFile()}hasFile(){return p(this.getData())}onSuccess(t){(t=t||this._options).clear&&this.reset()}onFail(t,e){if(!(e=e||this._options).quiet){let r=e.formatErrorResponse(t);this._errors.record(r,e.timeout),this._errors.hasElements()&&this._errors.scrollToFirst()}}buildBaseUrl(t){if((t=t||this._options).url.includes("://"))return t.url;let e=t.baseUrl,r=t.url;return e=e.replace(/\/+$/g,""),r=r.replace(/^\/+/g,""),`${e}/${r}`}makeUrl(t){let e=this.buildBaseUrl(t),r=e.includes("?")?"&":"?",n=e+r,i=[];return E(this.getData()).forEach((([t,e])=>{if(a(e))throw new Error("Cannot convert file to a string");i.push(t+(f(e)?"":`=${e}`))})),n+i.join("&")}addElement(t,e){this._errors.addElement(t,e)}removeElement(t){this._errors.removeElement(t)}removeElementKey(t){this._errors.removeElementKey(t)}}y=D,v(D,"defaultOptions",{method:"post",baseUrl:"",url:"",graphql:"graphql",query:"",sendWith:function(t,e,r,n){let i=new XMLHttpRequest,o=new Promise(((t,e)=>{i.onload=()=>{i.status>=200&&i.status<300?t(i):e(i)},i.onerror=()=>e(i)}));return i.open(t,e),r instanceof FormData?(i.setRequestHeader("Content-Type","multipart/form-data"),i.send(r)):(i.setRequestHeader("Content-Type","application/json"),i.send(JSON.stringify(r))),o},useJson:!1,strictMode:!1,isValidationError:({status:t})=>422===t,formatData:t=>t,formatErrorResponse:t=>{let e=t.data||t.response;if("string"==typeof e)try{e=JSON.parse(e)}catch(t){throw new Error("Unable to find errors in the response")}let r=e.errors;if(function(t){return!t||"object"!=typeof t||!Object.keys(t).length||Object.values(t).some((t=>h(t)?t.some((t=>!c(t))):!c(t)))}(r))throw new Error("Unable to find errors in the response");return r},timeout:!1,autoRemoveError:!0,clear:!0,quiet:!1,clone:!0,addAppendToDataCallback:!0}),v(D,"setOptions",(function(t){y.defaultOptions={...y.defaultOptions,...t}}));const O=D;return n})()));
//# sourceMappingURL=Form.min.map